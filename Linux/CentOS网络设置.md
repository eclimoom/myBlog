# 1.修改 DNS

```bash
#修改对应网卡的DNS的配置文件
vi /etc/resolv.conf
#添加域名服务器
nameserver 223.5.5.5 #阿里的DNS
nameserver 223.6.6.6
nameserver 8.8.8.8 #google的DNS
nameserver 8.8.4.4
#如果resolv.conf文件Generated by NetworkManager
#在/etc/sysconfig/network-scripts/ifcfg-eth0添加DNS1、DNS2
```

## 2. 设置网卡

```bash
vi /etc/sysconfig/network-scripts/ifcfg-ens33
```

文件说明

```bash
DEVICE=eth0  #网卡对应的设备别名
HWADDR=00:50:56:B6:C1:3A #网卡Mac地址
ONBOOT=yes   #系统启动时是否激活此设备
BOOTPROTO=dhcp  #网卡获得ip地址的方式
#dhcp 通过dhcp协议自动获取ip
#static 手动设置IP地址
```

## 3.修改静态 IP 配置

### 3.1windows 查看 VM 虚拟网卡信息

```bash
ipconfig /all
```

![networkstatic](./img/network/networkstatic.png)

### 3.2 查看 VM 虚拟网络 DHCP 设置

`VM编辑菜单 -> 虚拟网络编辑器 -> DHCP设置`

![networkstatic](./img/network/networkstatic02.png)

### 3.3 查看 VM 虚拟网络 NAT 设置

`VM编辑菜单 -> 虚拟网络编辑器 -> NAT设置`

![networkstatic](./img/network/networkstatic03.png)

### 3.4 设置静态 IP

```bash
vi /etc/sysconfig/network-scripts/ifcfg-ens33
```

```bash
BOOTPROTO=static
IPADDR=192.168.137.128
NETMASK=255.255.255.0
# 虚拟网卡地址
GATEWAY=192.168.137.1
DNS1=233.5.5.5
DNS2=8.8.8.8

ONBOOT=yes
```

重启虚拟机`reboot`

### 3.5 查看网络和路由

```bash
[root@loveFang network-scripts]# nmcli
enp0s3: 已连接 到 enp0s3
        "Intel 82540EM"
        ethernet (e1000), 08:00:27:EC:39:11, 硬件, mtu 1500
        ip4 默认
        inet4 10.0.2.4/24
        route4 0.0.0.0/0
        route4 10.0.2.0/24
        inet6 fe80::d4d6:1507:d0be:61c7/64
        route6 fe80::/64
        route6 ff00::/8

enp0s8: 已连接 到 enp0s8
        "Intel 82540EM"
        ethernet (e1000), 08:00:27:A2:F4:17, 硬件, mtu 1500
        inet4 192.168.137.102/24
        route4 192.168.137.0/24
        route4 0.0.0.0/0
        inet6 fe80::64d2:6461:8f1e:9537/64
        route6 fe80::/64
        route6 ff00::/8

[root@loveFang ~]# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.137.1   0.0.0.0         UG    100    0        0 enp0s3
0.0.0.0         10.0.2.1        0.0.0.0         UG    101    0        0 enp0s8
10.0.2.0        0.0.0.0         255.255.255.0   U     101    0        0 enp0s8
192.168.137.0   0.0.0.0         255.255.255.0   U     100    0        0 enp0s3
[root@loveFang ~]# route add default gw 10.0.2.1
# VirtualBox `第一块网卡为Nat,第二块网卡为Host-only`
[root@loveFang ~]# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.2.1        0.0.0.0         UG    0      0        0 enp0s8
0.0.0.0         192.168.137.1   0.0.0.0         UG    100    0        0 enp0s3
0.0.0.0         10.0.2.1        0.0.0.0         UG    101    0        0 enp0s8
10.0.2.0        0.0.0.0         255.255.255.0   U     101    0        0 enp0s8
192.168.137.0   0.0.0.0         255.255.255.0   U     100    0        0 enp0s3

```

## 4.防火墙设置

```bash
vi /etc/sysconfig/iptables
#添加80端口访问权限
firewall-cmd --zone=public --add-port=80/tcp --permanent
#添加ssh端口访问权限
firewall-cmd --zone=public --add-port=22/tcp --permanent
# 重新载入防火墙配置，当前连接不中断
firewall-cmd --reload
```

## 其他

### 5.1 设置静态 IP 后 ssh 访问慢的解决方法

```bash
vi /etc/ssh/sshd_config
#找到如下配置节点：
#UseDNS yes
#改为
UseDNS no
#启ssh服务：
systemctl restart sshd
```
